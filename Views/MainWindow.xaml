<Window
	x:Class="Cash_Flow_Management.MainWindow"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:local="clr-namespace:Cash_Flow_Management"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:models="clr-namespace:Cash_Flow_Management.Models"
	xmlns:viewModels="clr-namespace:Cash_Flow_Management.ViewModels"
	Title="MainWindow"
	Width="960"
	Height="450"
	d:DataContext="{d:DesignInstance Type=viewModels:MainWindowViewModel}"
	mc:Ignorable="d">

	<Window.Resources>
		<CollectionViewSource x:Key="GroupedCategories" Source="{Binding Categories}">
			<CollectionViewSource.GroupDescriptions>
				<PropertyGroupDescription PropertyName="Type" />
			</CollectionViewSource.GroupDescriptions>
		</CollectionViewSource>

	</Window.Resources>

	<Grid Margin="10">
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto" />
			<RowDefinition Height="*" />
			<RowDefinition Height="Auto" />
		</Grid.RowDefinitions>

		<!--  Input Section  -->
		<StackPanel
			Grid.Row="0"
			Margin="0,0,0,10"
			HorizontalAlignment="Left"
			Orientation="Horizontal">
			<DatePicker
				x:Name="DateInput"
				Width="110"
				Margin="0,0,10,0"
				ToolTip="Select Date" />
			<Label Content="Amount:" />
			<TextBox
				Width="60"
				Margin="0,0,10,0"
				VerticalContentAlignment="Center"
				Text="{Binding Amount}"
				ToolTip="Enter Amount" />
			<Label Content="Description:" />
			<TextBox
				Width="150"
				Margin="0,0,10,0"
				VerticalContentAlignment="Center"
				Text="{Binding Description}"
				ToolTip="Enter Description" />

			<Label Content="Category:" />

			<ComboBox
				Width="100"
				Margin="0,0,10,0"
				VerticalContentAlignment="Center"
				ItemsSource="{Binding Source={StaticResource GroupedCategories}}"
				SelectedItem="{Binding SelectedCategory, Mode=TwoWay}">
				<ComboBox.GroupStyle>
					<GroupStyle>
						<GroupStyle.HeaderTemplate>
							<DataTemplate>
								<TextBlock FontWeight="Bold" Text="{Binding Name}" />
							</DataTemplate>
						</GroupStyle.HeaderTemplate>
					</GroupStyle>
				</ComboBox.GroupStyle>

				<ComboBox.ItemTemplate>
					<DataTemplate>
						<TextBlock Text="{Binding Name}" />
					</DataTemplate>
				</ComboBox.ItemTemplate>
			</ComboBox>
			<Button
				Width="110"
				Command="{Binding AddCategoryCommand}"
				Content="Add new category" />
			<Separator
				Margin="0,0,10,0"
				Opacity="0.6"
				Style="{StaticResource {x:Static ToolBar.SeparatorStyleKey}}" />
			<Button
				Width="110"
				Command="{Binding AddTransactionCommand}"
				Content="Add transaction" />
		</StackPanel>

		<!--  Transactions Table  -->
		<DataGrid
			x:Name="TransactionGrid"
			Grid.Row="1"
			AutoGenerateColumns="False"
			CanUserAddRows="False"
			IsReadOnly="True"
			ItemsSource="{Binding Transactions}">
			<DataGrid.Columns>
				<DataGridTextColumn
					Width="*"
					Binding="{Binding Date}"
					Header="Date" />
				<DataGridTextColumn
					Width="*"
					Binding="{Binding Amount}"
					Header="Amount" />
				<DataGridTextColumn
					Width="*"
					Binding="{Binding Description}"
					Header="Description" />
				<DataGridTextColumn
					Width="*"
					Binding="{Binding Category.Name}"
					Header="Category" />
				<DataGridTextColumn
					Width="*"
					Binding="{Binding Category.Type}"
					Header="Type" />
			</DataGrid.Columns>
		</DataGrid>

		<!--  Monthly Summary  -->
		<StackPanel
			Grid.Row="2"
			Margin="0,10,0,0"
			HorizontalAlignment="Left"
			Orientation="Horizontal">
			<TextBlock FontWeight="Bold" Text="Total Revenues: " />
			<TextBlock
				x:Name="TotalRevenuesText"
				Margin="10,0,20,0"
				Text="0" />
			<TextBlock FontWeight="Bold" Text="Total Expenses: " />
			<TextBlock
				x:Name="TotalExpensesText"
				Margin="10,0,20,0"
				Text="0" />
			<TextBlock FontWeight="Bold" Text="Net Cash-Flow: " />
			<TextBlock x:Name="NetCashFlowText" Text="0" />
		</StackPanel>
	</Grid>
</Window>
